<template>
  <Toast/>
  <div class="min-h-screen w-full flex justify-center items-start pt-[100px]">
    <div class="w-[485px] py-[48px] px-[64px] bg-[#16161E] rounded-lg">
      <div class="flex flex-col items-center text-center">
        <img src="/icons/logo.svg" alt="logo" width="64">
        <h1 class="text-lg text-center mt-8">Create Your Creditopia Account</h1>
        <p class="text-base mt-4 text-[#AAA] text-center">Sign up to start leveraging your business</p>
      </div>
      <div class="mt-[40px]">
        <div class="flex flex-col gap-2 mt-5">
          <label for="name" class="text-sm text-[#AAA]">Name</label>
          <InputText v-model="name" id="name" placeholder="Enter your name" />
        </div>
        <div class="flex flex-col gap-2 mt-5">
          <label for="email" class="text-sm text-[#AAA]">Email</label>
          <InputText v-model="email" id="email" placeholder="Enter your email" />
        </div>
        <div class="flex flex-col gap-2 mt-5">
          <label for="phone-number" class="text-sm text-[#AAA]">Phone Number</label>
          <InputText v-model="phoneNumber" id="phone-number" placeholder="Enter your phone number" />
        </div>
        <div class="flex flex-col gap-2 mt-5">
          <label for="adress" class="text-sm text-[#AAA]">Adress</label>
          <InputText v-model="address" id="adress" placeholder="Enter your address" />
        </div>
        <Button @click="createAccount" label="Sign Up" fluid class="mt-[40px]" severity="contrast" />
      </div>
    </div>
  </div>
</template>

<script setup>
import InputText from 'primevue/inputtext';
import Button from 'primevue/button';
import { ref } from 'vue';
import Toast from 'primevue/toast';
import { useAuthStore } from '../stores/auth';
import { useToast } from 'primevue/usetoast';

const name = ref('');
const email = ref('');
const phoneNumber = ref('');
const address = ref('');

const toast = useToast()

const authStore = useAuthStore()

const createAccount = async () => {
  try {
    const accountData = {
      name: name.value,
      email: email.value,
      phone: phoneNumber.value,
      address: address.value,
    };

    await authStore.createUser(accountData)
    toast.add({ ...authStore.status })

  } catch (error) {
    console.log(error)
  }
}

</script>